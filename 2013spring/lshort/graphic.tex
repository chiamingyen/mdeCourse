%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 中文~4.20~翻譯：
% 5.2.5-5.2.11 gprsnl@bbs.ctex
% 其他章節     zpxing@bbs.ctex  email: zpxing at gmail dot com
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{chapter}{4}
\newcommand{\graphicscompanion}{\emph{The \LaTeX{} Graphics Companion}~\cite{graphicscompanion}}
\newcommand{\hobby}{\emph{A User's Manual for MetaPost}~\cite{metapost}}
\newcommand{\hoenig}{\emph{\TeX{} Unbound}~\cite{unbound}}
\newcommand{\graphicsinlatex}{\emph{Graphics in \LaTeXe{}}~\cite{ursoswald}}

%\chapter{Producing Mathematical Graphics}
%\label{chap:graphics}
\chapter{數學圖形}
\label{chap:graphics}

%\begin{intro}
%Most people use \LaTeX\ for typesetting their text. But as the non content and
%structure oriented approach to authoring is so convenient, \LaTeX\ also offers a,
%if somewhat restricted, possibility for producing graphical output from textual
%descriptions. Furthermore, quite a number of \LaTeX\ extensions have been created
%in order to overcome these restrictions. In this section, you will learn about a
%few of them.
%\end{intro}
\begin{intro}
大部分人使用 \LaTeX 排版文本。但是因為這種不面向內容和結構的寫作方法太方便了，
\LaTeX 還提供了從文本描述生成圖形輸出的一種有局限性的方法。此外，大量的 \LaTeX 擴展
被開發出來以克服這些限制。 在本節中，我們將學習其中的一些。
\end{intro}
%\section{Overview}
\section{概述}

%The \ei{picture} environment allows programming pictures directly in
%\LaTeX. A detailed
%description can be found in the \manual. On the one hand, there are rather
%severe constraints, as the slopes of line segments as well as the radii of
%circles are restricted to a narrow choice of values.  On the other hand, the
%\ei{picture} environment of \LaTeXe\ brings with it the \ci{qbezier}
%command, ``\texttt{q}'' meaning ``quadratic''.  Many frequently used curves
%such as circles, ellipses, or catenaries can be satisfactorily approximated
%by quadratic B\'ezier curves, although this may require some mathematical
%toil. If, in addition, a programming language like Java is used to generate
%\ci{qbezier} blocks of \LaTeX\ input files, the \ei{picture} environment
%becomes quite powerful.

\ei{picture} 環境可以在 \LaTeX{} 裡直接設計圖形。詳細的介紹請參考 \manual。
一方面，這種方法有嚴重的局限性，比如線段的斜率和圓的半徑只能在一個很小的範圍內取值。
另一方面， \LaTeXe 的 \ei{picture} 環境提供了 \ci{qbezier} 命令，
``\texttt{q}'' 表示 ``quadratic''。許多常用的曲線如圓、橢圓、或者懸鏈線都
可以用二次 B\'ezier 曲線得到令人滿意的近似，雖然這可能需要一些辛苦的數學準備。
另外，如果有一種編程語言如 Java 能用來生成 \LaTeX 源文檔的 \ci{qbezier} 模塊，
\ei{picture} 環境會更強大。

%Although programming pictures directly in \LaTeX\ is severely
%restricted, and often rather tiresome, there are still reasons for
%doing so. The documents thus produced are ``small'' with respect to
%bytes, and there are no additional graphics files to be dragged
%along.
%
%Packages like \pai{epic} and \pai{eepic} (described, for instance,
%in \companion), or \pai{pstricks} help to eliminate the restrictions
%hampering the original \ei{picture} environment, and greatly
%strengthen the graphical power of \LaTeX.
%
%While the former two packages just enhance the \ei{picture}
%environment, the \pai{pstricks} package has its own drawing
%environment, \ei{pspicture}. The power of \pai{pstricks} stems from
%the fact that this package makes extensive use of \PSi{}
%possibilities. In addition, numerous packages have been written for
%specific purposes. One of them is \texorpdfstring{\Xy}{Xy}-pic,
%described at the end of this chapter. A wide variety of these
%packages is described in detail in \graphicscompanion{} (not to be
%confused with \companion).

雖然直接在 \LaTeX 裡設計圖形的方法有嚴重的局限性而且通常比較繁瑣，
但它還是很有用的。這份文檔就是用它才變得體積很小，不需要插入額外的圖片。

一些宏包，如 \pai{epic} 和 \pai{eepic}（\companion 裡有介紹），或者
 \pai{pstricks} 可以排除 \ei{picture} 環境的局限，並大大地增強了 \LaTeX 的圖形功能。

跟前兩個宏包只是加強了 \ei{picture} 環境不同，\pai{pstricks} 宏包有自己的繪圖環境，
\ei{pspicture}。 \pai{pstricks} 的強大之處在於它廣泛應用了 \PSi{}。
另外，許多宏包可以用來處理專門的問題。其一是 \texorpdfstring{\Xy}{Xy}-pic，
本章最後會講到它。
\graphicscompanion{} （勿與 \companion 混淆）裡詳細介紹了大量的宏包.
%
%Perhaps the most powerful graphical tool related with \LaTeX\ is \texttt{MetaPost}, the twin of
%Donald E. Knuth's \texttt{METAFONT}. \texttt{MetaPost} has the very powerful and
%mathematically sophisticated programming language of \texttt{METAFONT}. Contrary to \texttt{METAFONT},
%which generates bitmaps, \texttt{MetaPost} generates encapsulated \PSi{} files,
%which can be imported in \LaTeX. For an introduction, see \hobby, or the tutorial on \cite{ursoswald}.

\LaTeX 最強大的圖形工具可能是 \texttt{MetaPost}， Donald E.
Knuth 編寫的 \texttt{METAFONT} 的孿生兄弟。
\texttt{MetaPost} 使用非常強大的數學編程語言： \texttt{METAFONT}。
與 \texttt{METAFONT} 生成點陣圖片不同，\texttt{MetaPost} 生成的是封裝的 \PSi{} 文件，
可以導入 \LaTeX 中。其介紹可以看 \hobby，或者 \cite{ursoswald}。

%
%A very thorough discussion of \LaTeX{} and \TeX{} strategies for graphics (and fonts) can
%be found in \hoenig.

關於 \LaTeX{} 和 \TeX{} 圖形（以及字體）支持方法的詳細討論請參考 \hoenig。

%\section{The \texttt{picture} Environment}
%\secby{Urs Oswald}{osurs@bluewin.ch}
\section{\texttt{picture} 環境}
\secby{Urs Oswald}{osurs@bluewin.ch}


%\subsection{Basic Commands}
\subsection{基本命令}

%A \ei{picture} environment\footnote{Believe it or not, the picture environment works out of the
%box, with standard \LaTeXe{} no package loading necessary.} is created with one of the two commands
一個 \ei{picture} 環境\footnote{信不信由你，picture 環境僅需標準的 \LaTeXe{}，「開箱即用」，無需載入宏包。}可以用下面兩個命令中的一個來創建
\begin{lscommand}
\ci{begin}\verb|{picture}(|$x,y$\verb|)|\ldots\ci{end}\verb|{picture}|
\end{lscommand}
\noindent 或者
\begin{lscommand}
\ci{begin}\verb|{picture}(|$x,y$\verb|)(|$x_0,y_0$\verb|)|\ldots\ci{end}\verb|{picture}|
\end{lscommand}
%The numbers $x,\,y,\,x_0,\,y_0$ refer to \ci{unitlength}, which can be reset any time
%(but not within a \ei{picture} environment) with a command such as
數字 $x,\,y,\,x_0,\,y_0$ 是相對於 \ci{unitlength} 而言的，任何時候（除了在 \ei{picture} 環境之內以外），都可以
使用命令如
\begin{lscommand}
\ci{setlength}\verb|{|\ci{unitlength}\verb|}{1.2cm}|
\end{lscommand}
%The default value of \ci{unitlength} is \texttt{1pt}. The first
%pair, $(x,y)$, effects the reservation, within the document, of
%rectangular space for the picture. The optional second pair,
%$(x_0,y_0)$, assigns arbitrary coordinates to the bottom left corner
%of the reserved rectangle.
\noindent
來改變。\ci{unitlength} 的默認值是 \texttt{1 pt}。第一個數對，
$(x,y)$， 在文檔中為圖形保留一個矩形的區域。可選的第二個數對，
$(x_0,y_0)$，為矩形左下角指派任意的坐標。

%Most drawing commands have one of the two forms
大多數的繪圖命令是下面兩種格式之一
\begin{lscommand}
\ci{put}\verb|(|$x,y$\verb|){|\emph{object}\verb|}|
\end{lscommand}
\noindent 或者
\begin{lscommand}
\ci{multiput}\verb|(|$x,y$\verb|)(|$\Delta x,\Delta
y$\verb|){|$n$\verb|}{|\emph{object}\verb|}|\end{lscommand}
%B\'ezier curves are an exception. They are drawn with the command
B\'ezier 曲線是一個例外。 它們需要用命令
\begin{lscommand}
\ci{qbezier}\verb|(|$x_1,y_1$\verb|)(|$x_2,y_2$\verb|)(|$x_3,y_3$\verb|)|
\end{lscommand}
\noindent 來畫。
\newpage

%\subsection{Line Segments}
\subsection{線段}
\begin{example}
\setlength{\unitlength}{5cm}
\begin{picture}(1,1)
  \put(0,0){\line(0,1){1}}
  \put(0,0){\line(1,0){1}}
  \put(0,0){\line(1,1){1}}
  \put(0,0){\line(1,2){.5}}
  \put(0,0){\line(1,3){.3333}}
  \put(0,0){\line(1,4){.25}}
  \put(0,0){\line(1,5){.2}}
  \put(0,0){\line(1,6){.1667}}
  \put(0,0){\line(2,1){1}}
  \put(0,0){\line(2,3){.6667}}
  \put(0,0){\line(2,5){.4}}
  \put(0,0){\line(3,1){1}}
  \put(0,0){\line(3,2){1}}
  \put(0,0){\line(3,4){.75}}
  \put(0,0){\line(3,5){.6}}
  \put(0,0){\line(4,1){1}}
  \put(0,0){\line(4,3){1}}
  \put(0,0){\line(4,5){.8}}
  \put(0,0){\line(5,1){1}}
  \put(0,0){\line(5,2){1}}
  \put(0,0){\line(5,3){1}}
  \put(0,0){\line(5,4){1}}
  \put(0,0){\line(5,6){.8333}}
  \put(0,0){\line(6,1){1}}
  \put(0,0){\line(6,5){1}}
\end{picture}
\end{example}
%Line segments are drawn with the command
線段用命令
\begin{lscommand}
\ci{put}\verb|(|$x,y$\verb|){|\ci{line}\verb|(|$x_1,y_1$\verb|){|$length$\verb|}}|
\end{lscommand}
%Line segments are drawn with the command
\noindent 來畫。 命令 \ci{line} 有兩個參量：
%\begin{enumerate}
%  \item a direction vector,
%  \item a length.
%\end{enumerate}
\begin{enumerate}
  \item 一個方向向量，
  \item 一個長度。
\end{enumerate}
%The components of the direction vector are restricted to the integers
方向向量需由以下整數構成
\[
  -6,\,-5,\,\ldots,\,5,\,6,
\]
%and they have to be coprime (no common divisor except 1). The figure illustrates all
%25 possible slope values in the first quadrant. The length is relative to \ci{unitlength}.
%The length argument is the vertical coordinate in the case of a vertical line segment, the
%horizontal coordinate in all other cases.
而且它們需要互質（除 1 以外，沒有公約數），圖形顯示了第一象限中所有 25 個可能的斜率值。
長度是相對於 \ci{unitlength} 來說的。長度的參量當一個垂直線段時是垂直坐標，其他情況都是水平坐標。

%\subsection{Arrows}
\subsection{箭頭}

\begin{example}
\setlength{\unitlength}{0.75mm}
\begin{picture}(60,40)
  \put(30,20){\vector(1,0){30}}
  \put(30,20){\vector(4,1){20}}
  \put(30,20){\vector(3,1){25}}
  \put(30,20){\vector(2,1){30}}
  \put(30,20){\vector(1,2){10}}
  \thicklines
  \put(30,20){\vector(-4,1){30}}
  \put(30,20){\vector(-1,4){5}}
  \thinlines
  \put(30,20){\vector(-1,-1){5}}
  \put(30,20){\vector(-1,-4){5}}
\end{picture}
\end{example}
%Arrows are drawn with the command
畫箭頭要用命令
\begin{lscommand}
\ci{put}\verb|(|$x,y$\verb|){|\ci{vector}\verb|(|$x_1,y_1$\verb|){|$length$\verb|}}|
\end{lscommand}
%For arrows, the components of the direction vector are even more narrowly restricted than
%for line segments, namely to the integers
箭頭的方向向量元素比線段的限制更嚴格，需由以下整數構成
\[
  -4,\,-3,\,\ldots,\,3,\,4.
\]
%Components also have to be coprime (no common divisor except 1). Notice the effect  of the
%\ci{thicklines} command on the two arrows pointing to the upper left.
而且需要互質（除 1 以外，沒有公約數）。注意命令 \ci{thicklines} 對指向左上方的兩個箭頭產生的效果。

%\subsection{Circles}
\subsection{圓}

\begin{example}
\setlength{\unitlength}{1mm}
\begin{picture}(60, 40)
  \put(20,30){\circle{1}}
  \put(20,30){\circle{2}}
  \put(20,30){\circle{4}}
  \put(20,30){\circle{8}}
  \put(20,30){\circle{16}}
  \put(20,30){\circle{32}}

  \put(40,30){\circle{1}}
  \put(40,30){\circle{2}}
  \put(40,30){\circle{3}}
  \put(40,30){\circle{4}}
  \put(40,30){\circle{5}}
  \put(40,30){\circle{6}}
  \put(40,30){\circle{7}}
  \put(40,30){\circle{8}}
  \put(40,30){\circle{9}}
  \put(40,30){\circle{10}}
  \put(40,30){\circle{11}}
  \put(40,30){\circle{12}}
  \put(40,30){\circle{13}}
  \put(40,30){\circle{14}}

  \put(15,10){\circle*{1}}
  \put(20,10){\circle*{2}}
  \put(25,10){\circle*{3}}
  \put(30,10){\circle*{4}}
  \put(35,10){\circle*{5}}
\end{picture}
\end{example}
%The command
命令
\begin{lscommand}
  \ci{put}\verb|(|$x,y$\verb|){|\ci{circle}\verb|{|\emph{diameter}\verb|}}|
\end{lscommand}
%\noindent draws a circle with center $(x,y)$ and diameter (not radius) \emph{diameter}.
%The \ei{picture} environment only admits diameters up to approximately 14\,mm,
%and even below this limit, not all diameters are possible. The \ci{circle*}
%command produces disks (filled circles).
\noindent
畫了一個圓心在 $(x,y)$ 直徑（不是半徑）為 \emph{diameter} 的圓。
\ei{picture} 環境只允許直徑最大是 14\,mm， 而且即使在這個限制之下，
也不是所有的直徑都可獲得。命令 \ci{circle*} 生成圓盤 （填充的圓形）。


%As in the case of line segments, one may have to resort to additional packages,
%such as \pai{eepic} or \pai{pstricks}.
%For a thorough description of these packages, see \graphicscompanion.

跟線段的情況一樣，你可能需要其他宏包的幫助，比如 \pai{eepic} 或者 \pai{pstricks}。
這些宏包的詳細說明請參考 \graphicscompanion。

%There is also a possibility within the
%\ei{picture} environment. If one is not afraid of doing the necessary calculations
%(or leaving them to a program), arbitrary circles and ellipses can be patched
%together from quadratic B\'ezier curves.
%See \graphicsinlatex\ for examples and Java source files.
\ei{picture} 環境還有另外一個可能。如果你不怕麻煩的必要的計算（或者交給一個程序來處理），
任意的圓和矩形都可以由二次 B\'ezier 曲線拼成。請看例子 \graphicsinlatex 以及 Java 源文件。


% \subsection{Text and Formulas}
\subsection{文本與公式}

\begin{example}
\setlength{\unitlength}{0.8cm}
\begin{picture}(6,5)
  \thicklines
  \put(1,0.5){\line(2,1){3}}
  \put(4,2){\line(-2,1){2}}
  \put(2,3){\line(-2,-5){1}}
  \put(0.7,0.3){$A$}
  \put(4.05,1.9){$B$}
  \put(1.7,2.95){$C$}
  \put(3.1,2.5){$a$}
  \put(1.3,1.7){$b$}
  \put(2.5,1.05){$c$}
  \put(0.3,4){$F=
    \sqrt{s(s-a)(s-b)(s-c)}$}
  \put(3.5,0.4){$\displaystyle
    s:=\frac{a+b+c}{2}$}
\end{picture}
\end{example}
% As this example shows, text and formulas can be written into a \ei{picture} environment with
% the \ci{put} command in the usual way.
如本例所示，文本與公式可以使用 \ci{put} 命令按照正常方式在 \ei{picture} 環境中使
用。

% \subsection{\ci{multiput} and \ci{linethickness}}
\subsection{\ci{multiput}~與~\ci{linethickness}}

\begin{example}
\setlength{\unitlength}{2mm}
\begin{picture}(30,20)
  \linethickness{0.075mm}
  \multiput(0,0)(1,0){26}%
    {\line(0,1){20}}
  \multiput(0,0)(0,1){21}%
    {\line(1,0){25}}
  \linethickness{0.15mm}
  \multiput(0,0)(5,0){6}%
    {\line(0,1){20}}
  \multiput(0,0)(0,5){5}%
    {\line(1,0){25}}
  \linethickness{0.3mm}
  \multiput(5,0)(10,0){2}%
    {\line(0,1){20}}
  \multiput(0,5)(0,10){2}%
    {\line(1,0){25}}
\end{picture}
\end{example}
% The command
% \begin{lscommand}
%   \ci{multiput}\verb|(|$x,y$\verb|)(|$\Delta x,\Delta y$\verb|){|$n$\verb|}{|\emph{object}\verb|}|
% \end{lscommand}
% \noindent has 4 arguments: the starting point, the translation vector from one object to the next,
% the number of objects, and the object to be drawn. The \ci{linethickness} command applies to
% horizontal and vertical line segments, but neither to oblique line segments, nor to circles.
% It does, however, apply to quadratic B\'ezier curves!
命令
\begin{lscommand}
  \ci{multiput}\verb|(|$x,y$\verb|)(|$\Delta x,\Delta y$\verb|){|$n$\verb|}{|\emph{object}\verb|}|
\end{lscommand}
\noindent
有 4 個參量：初始點，從一個對象到下一個的平移向量，對象的數目和要繪製
的對象。命令 \ci{linethickness} 可作用於水平和垂直方向的線段，但不能作用於傾斜的
線段和圓。然而，該命令可作用於二次 B\'ezier 曲線。

% \subsection{Ovals}
\subsection{橢圓}

\begin{example}
\setlength{\unitlength}{0.75cm}
\begin{picture}(6,4)
  \linethickness{0.075mm}
  \multiput(0,0)(1,0){7}%
    {\line(0,1){4}}
  \multiput(0,0)(0,1){5}%
    {\line(1,0){6}}
  \thicklines
  \put(2,3){\oval(3,1.8)}
  \thinlines
  \put(3,2){\oval(3,1.8)}
  \thicklines
  \put(2,1){\oval(3,1.8)[tl]}
  \put(4,1){\oval(3,1.8)[b]}
  \put(4,3){\oval(3,1.8)[r]}
  \put(3,1.5){\oval(1.8,0.4)}
\end{picture}
\end{example}
% The command
% \begin{lscommand}
%   \ci{put}\verb|(|$x,y$\verb|){|\ci{oval}\verb|(|$w,h$\verb|)}|
% \end{lscommand}
% \noindent or
% \begin{lscommand}
%   \ci{put}\verb|(|$x,y$\verb|){|\ci{oval}\verb|(|$w,h$\verb|)[|\emph{position}\verb|]}|
% \end{lscommand}
% \noindent produces an oval centered at $(x,y)$ and having width $w$ and height $h$. The optional
% \emph{position} arguments \texttt{b}, \texttt{t}, \texttt{l}, \texttt{r} refer to
% ``top'', ``bottom'', ``left'', ``right'', and can be combined, as the example illustrates.
命令
\begin{lscommand}
  \ci{put}\verb|(|$x,y$\verb|){|\ci{oval}\verb|(|$w,h$\verb|)}|
\end{lscommand}
\noindent 或
\begin{lscommand}
  \ci{put}\verb|(|$x,y$\verb|){|\ci{oval}\verb|(|$w,h$\verb|)[|\emph{position}\verb|]}|
\end{lscommand}
\noindent
可以產生一個中心在 $(x,y)$ 處、寬為 $w$ 高為 $h$ 的橢圓。如本例所示，可選
參量 \emph{position} 可以是 \texttt{b}, \texttt{t}, \texttt{l},
\texttt{r}, 分別
表示僅繪製橢圓的「下部」、「上部」、「左部」和「右部」，如例所示，這些參數可以進行組合。

% Line thickness can be controlled by two kinds of commands: \\
% \ci{linethickness}\verb|{|\emph{length}\verb|}|
% on the one hand, \ci{thinlines} and \ci{thicklines} on the other. While \ci{linethickness}\verb|{|\emph{length}\verb|}|
% applies only to horizontal and vertical lines (and quadratic B\'ezier curves), \ci{thinlines} and \ci{thicklines}
% apply to oblique line segments as well as to circles and ovals.
以下兩類命令可以控制線寬：一類
為 \ci{linethickness}\verb|{|\emph{length}\verb|}|，另一類
為 \ci{thinlines} 與 \ci{thicklines}。命
令 \ci{linethickness}\verb|{|\emph{length}\verb|}| 僅對水平和垂直直線（及二次 B\'ezier 曲線）有作用，
\ci{thinlines} 與 \ci{thicklines} 則可以作用於傾斜的線段、圓和橢圓。


% \subsection{Multiple Use of Predefined Picture Boxes}
\subsection{重複使用預定義的圖形盒子}

\begin{example}
\setlength{\unitlength}{0.5mm}
\begin{picture}(120,168)
\newsavebox{\foldera}
\savebox{\foldera}
  (40,32)[bl]{% definition
  \multiput(0,0)(0,28){2}
    {\line(1,0){40}}
  \multiput(0,0)(40,0){2}
    {\line(0,1){28}}
  \put(1,28){\oval(2,2)[tl]}
  \put(1,29){\line(1,0){5}}
  \put(9,29){\oval(6,6)[tl]}
  \put(9,32){\line(1,0){8}}
  \put(17,29){\oval(6,6)[tr]}
  \put(20,29){\line(1,0){19}}
  \put(39,28){\oval(2,2)[tr]}
}
\newsavebox{\folderb}
\savebox{\folderb}
  (40,32)[l]{%         definition
  \put(0,14){\line(1,0){8}}
  \put(8,0){\usebox{\foldera}}
}
\put(34,26){\line(0,1){102}}
\put(14,128){\usebox{\foldera}}
\multiput(34,86)(0,-37){3}
  {\usebox{\folderb}}
\end{picture}
\end{example}
% A picture box can be \emph{declared} by the command
% \begin{lscommand}
%   \ci{newsavebox}\verb|{|\emph{name}\verb|}|
% \end{lscommand}
% \noindent then \emph{defined} by
% \begin{lscommand}
%   \ci{savebox}\verb|{|\emph{name}\verb|}(|\emph{width,height}\verb|)[|\emph{position}\verb|]{|\emph{content}\verb|}|
% \end{lscommand}
% \noindent and finally arbitrarily often be \emph{drawn} by
% \begin{lscommand}
%   \ci{put}\verb|(|$x,y$\verb|)|\ci{usebox}\verb|{|\emph{name}\verb|}|
% \end{lscommand}
一個圖形盒子可以使用命令
\begin{lscommand}
  \ci{newsavebox}\verb|{|\emph{name}\verb|}|
\end{lscommand}
\noindent 進行\textbf{聲明}，然後使用命令
\begin{lscommand}
  \ci{savebox}\verb|{|\emph{name}\verb|}(|\emph{width,height}\verb|)[|\emph{position}\verb|]{|\emph{content}\verb|}|
\end{lscommand}
\noindent 進行\textbf{定義}，最後使用命令
\begin{lscommand}
  \ci{put}\verb|(|$x,y$\verb|)|\ci{usebox}\verb|{|\emph{name}\verb|}|
\end{lscommand}
\noindent 進行任意次數的重複\textbf{繪製}。

% The optional \emph{position} parameter has the effect of defining the
% `anchor point' of the savebox. In the example it is set to \texttt{bl} which
% puts the anchor point into the bottom left corner of the savebox. The other
% position specifiers are \texttt{t}op and \texttt{r}ight.
可選參數 \emph{position} 的作用是定義圖形存放盒子的「錨點」。在本例中該參數被設置
為 \texttt{bl}，從而將錨點設置為圖形存放盒子的左下角。其他的位置描述
有 \texttt{t} 和 \texttt{r}，分別表示「上」和「右」。

% The \emph{name} argument refers to a \LaTeX{} storage bin and therefore is
% of a command nature (which accounts for the backslashes in the current
% example). Boxed pictures can be nested: In this example, \ci{foldera} is
% used within the definition of \ci{folderb}.
參量 \emph{name} 指明了 \LaTeX{} 存儲槽，揭示了其命令本質（在本例中指反斜線）。圖
形盒子可以嵌套：在本例中，\ci{foldera} 被用在了 \ci{folderb} 的定義中。

% The \ci{oval} command had to be used as the \ci{line} command does not work if
% the segment length is less than about 3\,mm.
由於命令 \ci{line} 在線段長度小於大約 3\,mm 的時候不能正常工作，所以必須使用命令 \ci{oval}。

% \subsection{Quadratic B\'ezier Curves}
\subsection{二次~B\'ezier~曲線}

\begin{example}
\setlength{\unitlength}{0.8cm}
\begin{picture}(6,4)
  \linethickness{0.075mm}
  \multiput(0,0)(1,0){7}
    {\line(0,1){4}}
  \multiput(0,0)(0,1){5}
    {\line(1,0){6}}
  \thicklines
  \put(0.5,0.5){\line(1,5){0.5}}
  \put(1,3){\line(4,1){2}}
  \qbezier(0.5,0.5)(1,3)(3,3.5)
  \thinlines
  \put(2.5,2){\line(2,-1){3}}
  \put(5.5,0.5){\line(-1,5){0.5}}
  \linethickness{1mm}
  \qbezier(2.5,2)(5.5,0.5)(5,3)
  \thinlines
  \qbezier(4,2)(4,3)(3,3)
  \qbezier(3,3)(2,3)(2,2)
  \qbezier(2,2)(2,1)(3,1)
  \qbezier(3,1)(4,1)(4,2)
\end{picture}
\end{example}
% As this example illustrates, splitting up a circle into 4 quadratic B\'ezier curves
% is not satisfactory. At least 8 are needed. The figure again shows the effect of
% the \ci{linethickness} command on horizontal or vertical lines, and of the
% \ci{thinlines} and the \ci{thicklines} commands on oblique line segments. It also
% shows that both kinds of commands affect quadratic B\'ezier curves, each command
% overriding all previous ones.
如本例所示，將圓分割為 4 條二次 B\'ezier 曲線的效果不能令人滿意，至少需要 8 條。該圖
再一次展示了命令 \ci{linethickness} 對水平或垂直直線以及命
令 \ci{thinlines} 和 \ci{thicklines} 對傾斜線段的影響。該例同時顯示：這兩類命令都
會影響二次 B\'ezier 曲線，每一條命令都會覆蓋以前所有命令。

% Let $P_1=(x_1,\,y_1),\,P_2=(x_2,\,y_2)$ denote the end points, and $m_1,\,m_2$ the
% respective slopes, of a quadratic B\'ezier curve. The intermediate control point
% $S=(x,\,y)$ is then given by the equations
令 $P_1=(x_1,\,y_1),\,P_2=(x_2,\,y_2)$ 和 $m_1,\,m_2$ 分別表示一條二次 B\'ezier 曲線
的兩個端點及其對應斜率。中間控制點 $S=(x,\,y)$ 則由下述方程給出
\begin{equation} \label{zwischenpunkt}
  \left\{
    \begin{array}{rcl}
      x & = & \displaystyle \frac{m_2 x_2-m_1x_1-(y_2-y_1)}{m_2-m_1}, \\
      y & = & y_i+m_i(x-x_i)\qquad (i=1,\,2).
    \end{array}
  \right.
\end{equation}
% \noindent See \graphicsinlatex\ for a Java program which generates
% the necessary \ci{qbezier} command line.
\noindent
關於生成必要的 \ci{qbezier} 命令的 Java 程序參見 \graphicsinlatex。

% \subsection{Catenary}
\subsection{懸鏈線}

\begin{example}
\setlength{\unitlength}{1cm}
\begin{picture}(4.3,3.6)(-2.5,-0.25)
\put(-2,0){\vector(1,0){4.4}}
\put(2.45,-.05){$x$}
\put(0,0){\vector(0,1){3.2}}
\put(0,3.35){\makebox(0,0){$y$}}
\qbezier(0.0,0.0)(1.2384,0.0)
  (2.0,2.7622)
\qbezier(0.0,0.0)(-1.2384,0.0)
  (-2.0,2.7622)
\linethickness{.075mm}
\multiput(-2,0)(1,0){5}
  {\line(0,1){3}}
\multiput(-2,0)(0,1){4}
  {\line(1,0){4}}
\linethickness{.2mm}
\put( .3,.12763){\line(1,0){.4}}
\put(.5,-.07237){\line(0,1){.4}}
\put(-.7,.12763){\line(1,0){.4}}
\put(-.5,-.07237){\line(0,1){.4}}
\put(.8,.54308){\line(1,0){.4}}
\put(1,.34308){\line(0,1){.4}}
\put(-1.2,.54308){\line(1,0){.4}}
\put(-1,.34308){\line(0,1){.4}}
\put(1.3,1.35241){\line(1,0){.4}}
\put(1.5,1.15241){\line(0,1){.4}}
\put(-1.7,1.35241){\line(1,0){.4}}
\put(-1.5,1.15241){\line(0,1){.4}}
\put(-2.5,-0.25){\circle*{0.2}}
\end{picture}
\end{example}

% In this figure, each symmetric half of the catenary $y=\cosh x -1$ is approximated by a quadratic
% B\'ezier curve. The right half of the curve ends in the point \((2,\,2.7622)\), the slope there having the value
% \(m=3.6269\). Using again equation (\ref{zwischenpunkt}), we can
% calculate the intermediate control points. They turn out to be $(1.2384,\,0)$ and $(-1.2384,\,0)$.
% The crosses indicate points of the \emph{real} catenary. The error is barely noticeable, being less
% than one percent.
在本圖中，懸鏈線 $y=\cosh x
-1$ 對稱的兩半由二次 B\'ezier 曲線分別近似地繪成。曲線的右
半部分終止於點 \((2,\,2.7622)\)，對應的斜率為 \(m=3.6269\)。再次使用公
式 (\ref{zwischenpunkt})，我們可以計算中間控制點。計算結果
為 $(1.2384,\,0)$ 和 $(-1.2384,\,0)$。圖中的十字為{\textbf
真正}的懸鏈線上的點。誤差 小於百分之一，很難被發現。

% This example points out the use of the optional argument of the \\
% \verb|\begin{picture}| command.
% The picture is defined in convenient ``mathematical'' coordinates, whereas by the command
% \begin{lscommand}
%   \ci{begin}\verb|{picture}(4.3,3.6)(-2.5,-0.25)|
% \end{lscommand}
% \noindent its lower left corner (marked by the black disk) is assigned the
% coordinates $(-2.5,-0.25)$.
該例指出了命令 \verb|\begin{picture}| 的可選參數的用法。該圖通過使用命令
\begin{lscommand}
  \ci{begin}\verb|{picture}(4.3,3.6)(-2.5,-0.25)|
\end{lscommand}
\noindent 定義了方便的「數學」坐標：左下角（由黑色圓點標出）坐標是
$(-2.5,-0.25)$。

% \subsection{Rapidity in the Special Theory of Relativity}
\subsection{坐標的相對性}

\begin{example}
\setlength{\unitlength}{0.8cm}
\begin{picture}(6,4)(-3,-2)
  \put(-2.5,0){\vector(1,0){5}}
  \put(2.7,-0.1){$\chi$}
  \put(0,-1.5){\vector(0,1){3}}
  \multiput(-2.5,1)(0.4,0){13}
    {\line(1,0){0.2}}
  \multiput(-2.5,-1)(0.4,0){13}
    {\line(1,0){0.2}}
  \put(0.2,1.4)
    {$\beta=v/c=\tanh\chi$}
  \qbezier(0,0)(0.8853,0.8853)
    (2,0.9640)
  \qbezier(0,0)(-0.8853,-0.8853)
    (-2,-0.9640)
  \put(-3,-2){\circle*{0.2}}
\end{picture}
\end{example}
% The control points of the two B\'ezier curves were calculated with formulas (\ref{zwischenpunkt}).
% The positive branch is determined by $P_1=(0,\,0),\,m_1=1$ and $P_2=(2,\,\tanh 2),\,m_2=1/\cosh^2 2$.
% Again, the picture is defined in mathematically convenient coordinates, and the lower left corner
% is assigned the mathematical coordinates $(-3,-2)$ (black disk).
公式 (\ref{zwischenpunkt}) 給出了兩條 B\'ezier 曲線的控制點。正向分支
由 $P_1=(0,\,0),\,m_1=1$ 和 $P_2=(2,\,\tanh 2),\,m_2=1/\cosh^2 2$ 確定。與前例相
同，本圖也定義了在數學上方便的坐標，左下角的坐標是 $(-3,-2)$ （黑點）。

%\section{\texorpdfstring{\Xy}{Xy}-pic}
%\secby{Alberto Manuel Brand\~ao Sim\~oes}{albie@alfarrabio.di.uminho.pt}
\section{\texorpdfstring{\Xy}{Xy}-pic}
\secby{Alberto Manuel Brand\~ao Sim\~oes}{albie@alfarrabio.di.uminho.pt}

%\pai{xy} is a special package for drawing diagrams. To use it,
%simply add the following line to the preamble of your document:
%\begin{lscommand}
%\verb|\usepackage[|\emph{options}\verb|]{xy}|
%\end{lscommand}
%\emph{options} is a list of functions from \Xy-pic you want to
%load. These options are primarily useful when debugging the package.  I recommend
%you pass the \verb!all! option, making \LaTeX{} load all the \Xy{} commands.

\pai{xy} 是繪製流程圖的專用宏包。要想使用它，只需在導言區加上：
\begin{lscommand}
\verb|\usepackage[|\emph{options}\verb|]{xy}|
\end{lscommand}
\emph{options} 列出你需要載入的 \Xy-pic 的選項。這些選項基本上被用於調試這個宏包的使用。
建議你使用 \verb!all!，可以讓 \LaTeX{} 載入 \Xy{} 的所有命令。

%\Xy-pic diagrams are drawn over a matrix-oriented canvas, where
%each diagram element is placed in a matrix slot:
\Xy-pic 流程圖被繪製在一幅以矩陣定位的畫布上，每一個流程圖元素被放在矩陣的一個單元中：
\begin{example}
\begin{displaymath}
\xymatrix{A & B \\
          C & D }
\end{displaymath}
\end{example}
%The \ci{xymatrix} command must be used in math mode. Here, we
%specified two lines and two columns. To make this matrix a diagram we
%just add directed arrows using the \ci{ar} command.
命令 \ci{xymatrix} 必須置於數學模式中。這裡，我們設定了一個兩行兩列的矩陣。
為了畫出流程，我們只需要使用命令 \ci{ar} 增加帶方向的箭頭即可。
\begin{example}
\begin{displaymath}
\xymatrix{ A \ar[r] & B \ar[d] \\
           D \ar[u] & C \ar[l] }
\end{displaymath}
\end{example}
%The arrow command is placed on the origin cell for the arrow. The
%arguments are the direction the arrow should point to (\texttt{u}p,
%\texttt{d}own, \texttt{r}ight and \texttt{l}eft).
箭頭命令要放在其出發的那個單元裡。參量是箭頭的方向 （\texttt{u}：上，
\texttt{d}：下， \texttt{r}：右以及 \texttt{l}：左）.


\begin{example}
\begin{displaymath}
\xymatrix{
  A \ar[d] \ar[dr] \ar[r] & B \\
  D                       & C }
\end{displaymath}
\end{example}
%To make diagonals, just use more than one direction. In
%fact, you can repeat directions to make bigger arrows.
要畫對角線，可以指定不只一個方向參量。實際上，你還可以重複同一個方向來得到更大的箭頭。
\begin{example}
\begin{displaymath}
\xymatrix{
 A \ar[d] \ar[dr] \ar[drr] &&\\
 B                   & C & D }
\end{displaymath}
\end{example}

%We can draw even more interesting diagrams by adding
%labels to the arrows. To do this, we use the common superscript and
%subscript operators.
我們還可以繪製一些更有趣的流程圖，給箭頭加上標籤，只需要使用普通的上標和下標。
\begin{example}
\begin{displaymath}
\xymatrix{
  A \ar[r]^f \ar[d]_g &
             B \ar[d]^{g'} \\
  D \ar[r]_{f'}       & C }
\end{displaymath}
\end{example}

%As shown, you use these operators as in math mode. The only
%difference is that that superscript means ``on top of the arrow,''
%and subscript means ``under the arrow.'' There is a third operator, the vertical bar: \verb+|+
%It causes text to be placed \emph{in} the arrow.
如圖所示，就像數學模式裡一樣使用上下標。唯一的區別在於：上標表示放在 「箭頭的上方」，
下標表示放在「箭頭的下方」。 把文本放到箭頭上可以用 \verb+|+。
\begin{example}
\begin{displaymath}
\xymatrix{
  A \ar[r]|f \ar[d]|g &
             B \ar[d]|{g'} \\
  D \ar[r]|{f'}       & C }
\end{displaymath}
\end{example}

%To draw an arrow with a hole in it, use \verb!\ar[...]|\hole!.
繪製空心箭頭的命令是 \verb!\ar[...]|\hole!。

%In some situations, it is important to distinguish between different types of
%arrows. This can be done by putting labels on them, or changing their appearance:
某些情況下，需要區分不同類型的箭頭。可以給它們標上標籤，或者使用不同的外觀來實現：

\begin{example}
\shorthandoff{"}
\begin{displaymath}
\xymatrix{
\bullet\ar@{->}[rr] && \bullet\\
\bullet\ar@{.<}[rr] && \bullet\\
\bullet\ar@{~)}[rr] && \bullet\\
\bullet\ar@{=(}[rr] && \bullet\\
\bullet\ar@{~/}[rr] && \bullet\\
\bullet\ar@{^{(}->}[rr] &&
                       \bullet\\
\bullet\ar@2{->}[rr] && \bullet\\
\bullet\ar@3{->}[rr] && \bullet\\
\bullet\ar@{=+}[rr]  && \bullet
}
\end{displaymath}
\shorthandon{"}
\end{example}

%Notice the difference between the following two diagrams:
注意下面兩幅流程圖的區別：

\begin{example}
\begin{displaymath}
\xymatrix{
 \bullet \ar[r]
         \ar@{.>}[r] &
 \bullet
}
\end{displaymath}
\end{example}

\begin{example}
\begin{displaymath}
\xymatrix{
 \bullet \ar@/^/[r]
         \ar@/_/@{.>}[r] &
 \bullet
}
\end{displaymath}
\end{example}

%The modifiers between the slashes define how the curves are drawn.
%\Xy-pic offers many ways to influence the drawing of curves;
%for more information, check \Xy-pic documentation.
兩條斜線間的修飾元素決定了曲線應該如何被畫出。
\Xy-pi 提供了很多辦法來改變曲線的形狀；更詳細的內容請參考 \Xy-pic 的文檔。

% \begin{example}
% \begin{lscommand}
% \ci{dum}
% \end{lscommand}
% \end{example}

